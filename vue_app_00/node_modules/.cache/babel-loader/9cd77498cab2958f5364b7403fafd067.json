{"remainingRequest":"d:\\Web前端\\正课课件\\项目\\我的项目\\xiaomi\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!d:\\Web前端\\正课课件\\项目\\我的项目\\xiaomi\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!d:\\Web前端\\正课课件\\项目\\我的项目\\xiaomi\\vue_app_00\\src\\components\\home\\shopCart.vue?vue&type=script&lang=js","dependencies":[{"path":"d:\\Web前端\\正课课件\\项目\\我的项目\\xiaomi\\vue_app_00\\src\\components\\home\\shopCart.vue","mtime":1554014439881},{"path":"d:\\Web前端\\正课课件\\项目\\我的项目\\xiaomi\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"d:\\Web前端\\正课课件\\项目\\我的项目\\xiaomi\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"d:\\Web前端\\正课课件\\项目\\我的项目\\xiaomi\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nexport default {\n  data: function data() {\n    return {\n      list: [],\n      allcb: false,\n      sum: 0\n    };\n  },\n  methods: {\n    getShop: function getShop() {\n      var _this = this;\n\n      var url = \"http://127.0.0.1:3000/user/cartlist\";\n      this.axios.get(url).then(function (res) {\n        var rows = res.data.data;\n\n        _this.$store.commit(\"updateCount\", rows.length);\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = rows[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n            item.cb = false;\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        _this.list = rows;\n      });\n    },\n    addAll: function addAll(e) {\n      var cb = e.target.checked;\n      this.allcb = cb;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.list[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n          item.cb = cb;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    },\n    modifyItem: function modifyItem(e) {\n      var i = e.target.dataset.i;\n      var checked = e.target.checked;\n      this.list[i].cb = checked;\n      var count = 0;\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.list[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var item = _step3.value;\n\n          if (item.cb) {\n            count++;\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      if (count == this.list.length) {\n        this.allcb = true;\n      } else {\n        this.allcb = false;\n      }\n    },\n    add: function add(e) {\n      var id = e.target.dataset.id;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.list[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var key = _step4.value;\n\n          if (key.id == id) {\n            key.count++;\n            return;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    },\n    redu: function redu(e) {\n      var id = e.target.dataset.id;\n      console.log(id);\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = this.list[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var key = _step5.value;\n\n          if (key.id == id) {\n            if (key.count > 1) {\n              key.count--;\n              return;\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n    },\n    del: function del(e) {\n      var _this2 = this;\n\n      var id = e.target.dataset.id;\n      var i = e.target.dataset.i;\n      console.log(id);\n      var url = \"http://127.0.0.1:3000/user/delShop?id=\" + id;\n      this.axios.get(url).then(function (res) {\n        if (res.data.code == 1) {\n          _this2.list.splice(i, 1);\n        }\n      });\n    },\n    delItem: function delItem() {\n      var _this3 = this;\n\n      var html = \"\";\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = this.list[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var item = _step6.value;\n\n          if (item.cb) {\n            html += item.id + \",\";\n          }\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6.return != null) {\n            _iterator6.return();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n\n      html = html.substring(0, html.length - 1);\n      var url = \"http://127.0.0.1:3000/user/delMitem?ids=\" + html;\n      this.axios.get(url).then(function (res) {\n        if (res.data.code == 1) {\n          Toast(\"删除成功\"), _this3.getShop();\n        }\n      });\n    }\n  },\n  created: function created() {\n    this.getShop();\n  }\n};",{"version":3,"sources":["shopCart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div id=\"app-shopCart\">\r\n        <div class=\"mui-card\">\r\n\t\t\t<div class=\"mui-card-header\">\r\n                <span>全选</span><input type=\"checkbox\" @click=\"addAll\" :checked=\"allcb\">\r\n            </div>\r\n\t\t\t<div class=\"mui-card-content\" v-for=\"(item,i) of list\" :key=\"item.id\">\r\n\t\t\t\t<div class=\"mui-card-content-inner\">\r\n                    <div id=\"shopCar\">\r\n                         <div class=\"shop-top\" >\r\n                            <input type=\"checkbox\" :checked=\"item.cb\" :data-i=\"i\" @click=\"modifyItem\">\r\n                            <div class=\"pic\">\r\n                                <img :src=\"item.picture\" >\r\n                            </div>\r\n                            <div style=\"width:80px\">\r\n                                <div class=\"type\">{{item.typeA}}</div>\r\n                                <div class=\"pri\">{{item.price}}元</div>\r\n                            </div>\r\n                            <div>\r\n                                <button @click=\"redu\" :data-id=\"item.id\">-</button>\r\n                                <input type=\"text\" :value=\"item.count\">\r\n                                <button @click=\"add\" :data-id=\"item.id\">+</button>\r\n                            </div>\r\n                        </div>  \r\n                        <div class=\"shop-bottom\">\r\n                            <div>小计：{{item.count*item.price}}元</div>\r\n                            <button @click=\"del\"  :data-id=\"item.id\" :data-i=\"i\">删除</button>\r\n                        </div>   \r\n                    </div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"mui-card-footer\">\r\n                <span>总计：{{sum}}元</span>\r\n                <button @click=\"delItem\">删除选中的商品</button>\r\n            </div>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {Toast} from \"mint-ui\";\r\nexport default {\r\n    data(){\r\n        return{\r\n            list:[],\r\n            allcb:false,\r\n            sum:0\r\n        }\r\n    },\r\n    methods:{\r\n        getShop(){\r\n            var url=\"http://127.0.0.1:3000/user/cartlist\";\r\n            this.axios.get(url).then(res=>{\r\n                var rows=res.data.data;\r\n                this.$store.commit(\"updateCount\",rows.length)\r\n                for(var item of rows){\r\n                    item.cb=false;\r\n                }\r\n                this.list=rows;\r\n            })\r\n        },\r\n        addAll(e){\r\n            var cb=e.target.checked;\r\n            this.allcb=cb;\r\n                for(var item of this.list){\r\n                    item.cb=cb\r\n                }\r\n        },\r\n        modifyItem(e){\r\n            var i=e.target.dataset.i;\r\n            var checked=e.target.checked;\r\n            this.list[i].cb=checked;\r\n            var count=0;\r\n            for(var item of this.list){\r\n                if(item.cb){\r\n                    count++;\r\n                } \r\n            }\r\n            if(count==this.list.length){\r\n                this.allcb=true;\r\n            }else{\r\n                this.allcb=false;\r\n            }\r\n        },\r\n        add(e){\r\n            var id = e.target.dataset.id\r\n            for(var key of this.list){\r\n                if(key.id == id){\r\n                   key.count++;\r\n                   return ; \r\n                }\r\n            }       \r\n        },\r\n        redu(e){\r\n            var id = e.target.dataset.id\r\n            console.log(id)\r\n            for(var key of this.list){\r\n                if(key.id == id){\r\n                    if(key.count>1){\r\n                        key.count--;\r\n                        return ;\r\n                    }   \r\n                }\r\n            }\r\n        },\r\n        del(e){\r\n            var id=e.target.dataset.id;\r\n            var i=e.target.dataset.i;\r\n            console.log(id);\r\n            var url=\"http://127.0.0.1:3000/user/delShop?id=\"+id;\r\n            this.axios.get(url).then(res=>{\r\n                if(res.data.code==1){\r\n                    this.list.splice(i,1);\r\n                }\r\n            })\r\n        },\r\n        delItem(){\r\n            var html=\"\";\r\n            for(var item of this.list){\r\n                if(item.cb){\r\n                    html+=item.id+\",\";\r\n                }\r\n            }\r\n            html=html.substring(0,html.length-1);\r\n            var url=\"http://127.0.0.1:3000/user/delMitem?ids=\"+html;\r\n            this.axios.get(url).then(res=>{\r\n                if(res.data.code==1){\r\n                    Toast(\"删除成功\"),\r\n                    this.getShop()\r\n                }\r\n            })\r\n        },\r\n    },\r\n    created(){\r\n        this.getShop();\r\n        \r\n    },\r\n}\r\n</script>\r\n<style>\r\n    #app-shopCart>div>div:first-child{\r\n        justify-content: flex-start;\r\n    }\r\n    #app-shopCart>div>div:first-child>input{\r\n        width:20px;\r\n        height:20px;\r\n    }\r\n    #shopCar .shop-top,#shopCar .shop-bottom{\r\n        display: flex;\r\n        align-items:center;\r\n        justify-content: space-between; \r\n    }\r\n    \r\n    #shopCar .shop-top>input{\r\n        width:20px;\r\n        height:20px;    \r\n        line-height: 100px;\r\n    }\r\n    #shopCar>.shop-top{ \r\n        height:100px       \r\n    }\r\n    #shopCar>.shop-bottom{\r\n        height:40px;\r\n        border-top:1px solid #D9D8DC;\r\n    }\r\n   #shopCar button{\r\n        width:40px;\r\n        height:30px;\r\n    }\r\n    #shopCar input{\r\n        width:50px;\r\n        height:30px;\r\n    }\r\n      #shopCar .shop-top .pic {\r\n          width: 80px;\r\n          height:80px;\r\n      }\r\n      #shopCar .shop-top .pic img{\r\n          width:100%;\r\n          height:100%;\r\n      }\r\n      #shopCar .shop-bottom button{\r\n          width:60px;\r\n      }\r\n      #shopCar .shop-top .type{\r\n          font-size: 15px;\r\n      }\r\n       #shopCar .shop-top .pri{\r\n           font-size: 15px;\r\n       }\r\n       #app-shopCart .mui-card-content-inner{\r\n           padding-bottom: 0;\r\n       }\r\n</style>\r\n\r\n"],"sourceRoot":"src\\components\\home"}]}